# MathLedger Nightly Operations Configuration
# This file contains environment variables and settings for automated nightly runs

# Database Configuration (populate with real credentials before running)
DATABASE_URL=postgresql://<user>:<password>@localhost:5432/mathledger?sslmode=require
REDIS_URL=redis://:<password>@localhost:6379/0
QUEUE_KEY=ml:jobs

# Security Controls
CORS_ALLOWED_ORIGINS=https://dashboard.example.com
LEDGER_API_KEY=<api-key>
MAX_REQUEST_BODY_BYTES=1048576
RATE_LIMIT_REQUESTS_PER_MINUTE=120
RATE_LIMIT_WINDOW_SECONDS=60

# Derivation Limits
DERIVE_STEPS=300
DERIVE_DEPTH_MAX=4
DERIVE_MAX_BREADTH=500
DERIVE_MAX_TOTAL=2000

# Monitoring Configuration
METRICS_URL=http://localhost:8000/metrics
HEALTH_URL=http://localhost:8000/health
SUCCESS_RATE_THRESHOLD=85
TIMEOUT_THRESHOLD_MS=5000
POLL_INTERVAL_MINUTES=5

# Alerting Configuration
ALERT_WEBHOOK=
ALERT_ENABLED=false

# File Paths
PROGRESS_PATH=docs/progress.md
EXPORTS_DIR=exports
LOGS_DIR=logs
SNAP_DIR=exports
BACKUP_DIR=backups

# Lean Configuration
LEAN_PROJECT_DIR=backend/lean_proj
LEAN_CACHE_DIR=backend/lean_proj/.lake

# Database Maintenance
VACUUM_ANALYZE=true
PRUNE_FAILED_PROOFS_DAYS=14

# Backup Configuration
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Export Configuration
EXPORT_CHUNK_SIZE=1000
EXPORT_MAX_FILE_SIZE_MB=100
