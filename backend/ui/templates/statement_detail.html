<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MathLedger — Statement</title>
<style>
 body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;margin:0;background:#0b0f17;color:#e6edf3}
 header{padding:16px 20px;border-bottom:1px solid #1f2633;background:#0e1420}
 a{color:#93c5fd;text-decoration:none} a:hover{text-decoration:underline}
 .wrap{padding:16px 20px}
 .mono{font-family:ui-monospace,SFMono-Regular,Consolas,Menlo,monospace}
 .muted{color:#9aa4b2}
 table{width:100%;border-collapse:collapse;margin-top:12px}
 th,td{padding:8px 6px;border-bottom:1px solid #1f2937;text-align:left}
 .hash{word-break:break-all}
</style>
</head><body>
<header><a href="/ui">← Dashboard</a></header>
<div class="wrap">
  {% if not_found %}
    <h2 class="mono">Statement not found</h2>
    <div class="muted mono">hash: {{ hash }}</div>
  {% else %}
    <h2 class="mono">{{ stmt.display }}</h2>
    <div class="muted">Hash: <span class="mono hash">{{ stmt.hash }}</span></div>

    <h3 style="margin-top:18px">Parents</h3>
    <table>
      <thead><tr><th>Parent Statement</th><th>Hash</th></tr></thead>
      <tbody id="parentsBody"><tr><td colspan="2" class="muted">Loading…</td></tr></tbody>
    </table>

    <h3 style="margin-top:18px">Proofs</h3>
    <table>
      <thead><tr><th>Method</th><th>Status</th><th>Success</th><th>Created</th></tr></thead>
      <tbody id="proofsBody"><tr><td colspan="4" class="muted">Loading…</td></tr></tbody>
    </table>
  {% endif %}
</div>

<script>
(async function(){
  // Parents
  const pb = document.getElementById('parentsBody');
  try{
    const r = await fetch('/ui/parents/{{ hash }}.json', {cache:'no-store'});
    const j = await r.json();
    pb.innerHTML = '';
    const items = j.parents || [];
    if(!items.length){
      pb.innerHTML = '<tr><td colspan="2" class="muted">No recorded parents.</td></tr>';
    } else {
      for(const p of items){
        const tr = document.createElement('tr');
        const disp = (p.display||'').trim() || p.hash;
        tr.innerHTML = `<td class="mono"><a href="/ui/s/${p.hash}">${disp}</a></td>
                        <td class="mono">${p.hash}</td>`;
        pb.appendChild(tr);
      }
    }
  }catch(e){
    pb.innerHTML = '<tr><td colspan="2" class="muted">Error loading parents.</td></tr>';
  }

  // Proofs
  const qb = document.getElementById('proofsBody');
  try{
    const r2 = await fetch('/ui/proofs/{{ hash }}.json', {cache:'no-store'});
    const j2 = await r2.json();
    qb.innerHTML = '';
    const rows = j2.proofs || [];
    if(!rows.length){
      qb.innerHTML = '<tr><td colspan="4" class="muted">No proofs recorded for this statement.</td></tr>';
    } else {
      for(const p of rows){
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class="mono">${p.method ?? '—'}</td>
                        <td class="mono">${p.status ?? '—'}</td>
                        <td class="mono">${p.success ?? '—'}</td>
                        <td class="mono">${p.created_at ?? '—'}</td>`;
        qb.appendChild(tr);
      }
    }
  }catch(e){
    qb.innerHTML = '<tr><td colspan="4" class="muted">Error loading proofs.</td></tr>';
  }
})();
</script>
</body></html>
