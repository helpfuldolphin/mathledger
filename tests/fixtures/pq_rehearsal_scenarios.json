{
  "$schema": "https://mathledger.org/schemas/pq-rehearsal-scenarios-v1.json",
  "version": "1.0.0",
  "description": "Rehearsal mode fixtures for PQ activation dry-run training",
  "scenarios": {
    "success": {
      "name": "All Checks Pass",
      "description": "Ideal scenario where node is fully ready for activation",
      "node_state": {
        "software_version": "v2.1.0-pq",
        "sync_status": {
          "is_synced": true,
          "current_block": 9900,
          "catching_up": false
        },
        "pq_modules_present": true,
        "drift_radar_enabled": true,
        "monitoring_up": true,
        "disk_space_gb": 500
      },
      "expected_exit_code": 0,
      "expected_report": {
        "checks_passed": 6,
        "checks_failed": 0,
        "warnings": 0,
        "ready_for_activation": true
      }
    },
    "missing_module": {
      "name": "Missing PQ Module",
      "description": "Critical failure: Required PQ consensus module is missing",
      "node_state": {
        "software_version": "v2.1.0-pq",
        "sync_status": {
          "is_synced": true,
          "current_block": 9900,
          "catching_up": false
        },
        "pq_modules_present": false,
        "missing_modules": [
          "backend/consensus_pq/rules.py"
        ],
        "drift_radar_enabled": true,
        "monitoring_up": true,
        "disk_space_gb": 500
      },
      "expected_exit_code": 1,
      "expected_report": {
        "checks_passed": 5,
        "checks_failed": 1,
        "warnings": 0,
        "ready_for_activation": false,
        "failure_reason": "missing_pq_modules"
      }
    },
    "drift_radar_disabled": {
      "name": "Drift Radar Disabled",
      "description": "Critical failure: Drift radar is not enabled (cannot detect consensus issues)",
      "node_state": {
        "software_version": "v2.1.0-pq",
        "sync_status": {
          "is_synced": true,
          "current_block": 9900,
          "catching_up": false
        },
        "pq_modules_present": true,
        "drift_radar_enabled": false,
        "monitoring_up": true,
        "disk_space_gb": 500
      },
      "expected_exit_code": 1,
      "expected_report": {
        "checks_passed": 5,
        "checks_failed": 1,
        "warnings": 1,
        "ready_for_activation": false,
        "failure_reason": "drift_radar_disabled"
      }
    },
    "low_disk_space": {
      "name": "Insufficient Disk Space",
      "description": "Critical failure: Not enough disk space for dual-commitment blocks",
      "node_state": {
        "software_version": "v2.1.0-pq",
        "sync_status": {
          "is_synced": true,
          "current_block": 9900,
          "catching_up": false
        },
        "pq_modules_present": true,
        "drift_radar_enabled": true,
        "monitoring_up": true,
        "disk_space_gb": 50
      },
      "expected_exit_code": 1,
      "expected_report": {
        "checks_passed": 5,
        "checks_failed": 1,
        "warnings": 0,
        "ready_for_activation": false,
        "failure_reason": "insufficient_disk_space"
      }
    }
  }
}
