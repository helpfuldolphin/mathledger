{
  "timestamp": "2025-11-04T19:08:52.143003+00:00",
  "test_run_id": "interop_2025_11_04",
  "overall_status": "PASS",
  "api_availability": {
    "localhost:8000": "DOWN",
    "note": "PowerShell tests require live API"
  },
  "languages": {
    "python": {
      "status": "PASS",
      "test_file": "tests/interop/test_type_coercion.py, tests/interop/test_api_contracts.py",
      "framework": "pytest",
      "total_tests": 41,
      "passed": 39,
      "failed": 0,
      "skipped": 2,
      "duration_ms": 1230,
      "test_categories": {
        "type_coercion": {
          "passed": 24,
          "failed": 0,
          "tests": [
            "boolean_serialization: True\u2192true (3 tests)",
            "null_serialization: None\u2192null (3 tests)",
            "number_serialization: int preservation (4 tests)",
            "string_serialization: UTF-8 encoding (3 tests)",
            "timestamp_serialization: ISO 8601 (2 tests)",
            "array_serialization: structure preservation (2 tests)",
            "object_serialization: nested objects (2 tests)",
            "field_ordering: stable keys (2 tests)",
            "edge_cases: large numbers, unicode, mixed types (3 tests)"
          ]
        },
        "api_contracts": {
          "passed": 15,
          "failed": 0,
          "skipped": 2,
          "tests": [
            "metrics_endpoint: required fields, types (3 tests)",
            "heartbeat_endpoint: required fields, types (3 tests)",
            "blocks_endpoint: structure validation (1 skipped)",
            "statements_endpoint: auth, validation (2 tests, 1 skipped)",
            "health_endpoint: structure (1 test)",
            "json_round_trip: fidelity tests (4 tests)",
            "field_consistency: naming conventions (2 tests)"
          ]
        }
      },
      "drift_detected": []
    },
    "javascript": {
      "status": "PASS",
      "test_file": "tests/interop/mathledger_client.test.js",
      "framework": "custom (node)",
      "total_tests": 18,
      "passed": 18,
      "failed": 0,
      "skipped": 0,
      "duration_ms": 150,
      "test_categories": {
        "sdk_contracts": {
          "passed": 18,
          "failed": 0,
          "tests": [
            "metrics_endpoint: fields, types, integer handling (3 tests)",
            "heartbeat_endpoint: fields, boolean, timestamp (3 tests)",
            "blocks_endpoint: structure, types (2 tests)",
            "health_endpoint: structure (1 test)",
            "statements_endpoint: structure, arrays (2 tests)",
            "nested_objects: navigation (1 test)",
            "latency_tracking: SDK feature (1 test)",
            "json_round_trip: type preservation (1 test)",
            "field_naming: snake_case (1 test)",
            "error_handling: 404 responses (1 test)",
            "utf8_handling: special characters (1 test)"
          ]
        }
      },
      "drift_detected": []
    },
    "powershell": {
      "status": "ABSTAIN",
      "reason": "Live API unavailable (http://localhost:8000)",
      "test_file": "tests/interop/Test-APIContracts.ps1",
      "framework": "pester/custom",
      "note": "PowerShell tests validate Invoke-RestMethod type coercion against live API",
      "planned_tests": [
        "metrics_endpoint: PS type coercion (int, float, bool)",
        "heartbeat_endpoint: JSON true \u2192 $true, null \u2192 $null",
        "blocks_endpoint: timestamp parsing [DateTime]",
        "health_endpoint: structure validation",
        "statements_endpoint: X-API-Key header enforcement",
        "type_coercion: bool, null, int, string, object",
        "field_naming: snake_case consistency",
        "json_round_trip: ConvertTo-Json/ConvertFrom-Json fidelity"
      ]
    }
  },
  "drift_analysis": {
    "integer_to_float": {
      "detected": false,
      "description": "No integer\u2192float coercion detected",
      "examples": []
    },
    "boolean_to_int": {
      "detected": false,
      "description": "No boolean\u2192int coercion detected",
      "examples": []
    },
    "null_to_missing": {
      "detected": false,
      "description": "No null\u2192missing field issues detected",
      "examples": []
    },
    "field_name_mismatch": {
      "detected": false,
      "description": "All fields use snake_case consistently",
      "examples": []
    },
    "type_preservation": {
      "status": "PASS",
      "bool_roundtrip": "Python True \u2192 JSON true \u2192 JS true (PASS)",
      "null_roundtrip": "Python None \u2192 JSON null \u2192 JS null (PASS)",
      "int_roundtrip": "Python 150 \u2192 JSON 150 \u2192 JS 150 (not 150.0) (PASS)",
      "float_roundtrip": "Python 93.75 \u2192 JSON 93.75 \u2192 JS 93.75 (PASS)",
      "string_roundtrip": "UTF-8 preserved including special chars (PASS)"
    }
  },
  "contract_validation": {
    "/metrics": {
      "required_fields": [
        "proofs",
        "block_count",
        "max_depth"
      ],
      "python": "PASS",
      "javascript": "PASS",
      "powershell": "ABSTAIN"
    },
    "/heartbeat.json": {
      "required_fields": [
        "ok",
        "ts",
        "proofs",
        "blocks"
      ],
      "python": "PASS",
      "javascript": "PASS",
      "powershell": "ABSTAIN"
    },
    "/blocks/latest": {
      "required_fields": [
        "block_number",
        "merkle_root",
        "created_at",
        "header"
      ],
      "python": "SKIPPED (needs seeded DB)",
      "javascript": "PASS",
      "powershell": "ABSTAIN"
    },
    "/statements": {
      "required_fields": [
        "statement",
        "hash",
        "proofs",
        "parents"
      ],
      "requires_auth": "X-API-Key header",
      "python": "PASS",
      "javascript": "PASS",
      "powershell": "ABSTAIN"
    },
    "/health": {
      "required_fields": [
        "status",
        "timestamp"
      ],
      "python": "PASS",
      "javascript": "PASS",
      "powershell": "ABSTAIN"
    }
  },
  "type_safety_summary": {
    "booleans": "\u2713 true/false (not 1/0)",
    "nulls": "\u2713 explicit null (not missing fields)",
    "integers": "\u2713 no float coercion (150 not 150.0)",
    "floats": "\u2713 precision preserved (93.75)",
    "timestamps": "\u2713 ISO 8601 strings",
    "field_naming": "\u2713 snake_case consistent",
    "utf8": "\u2713 special characters preserved"
  },
  "recommendations": [
    {
      "category": "powershell_testing",
      "priority": "LOW",
      "description": "Run PowerShell tests with live API to complete 3-language validation",
      "command": "powershell -File tests/interop/Test-APIContracts.ps1"
    },
    {
      "category": "ci_integration",
      "priority": "MEDIUM",
      "description": "Add interop tests to CI pipeline",
      "action": "pytest tests/interop/ && node tests/interop/mathledger_client.test.js"
    }
  ],
  "seal": "[PASS] Interop Verified langs=2 drift\u2264\u03b5 (PowerShell: ABSTAIN - API unavailable)"
}