[pytest]
testpaths = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    -m "not ht_spec"
markers =
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    slow: marks tests as slow running
    determinism: marks tests verifying deterministic behavior
    first_organism: marks tests for First Organism closed loop
    first_organism_core: marks happy path First Organism tests
    first_organism_failure_mode: marks failure mode analysis tests
    first_organism_smoke: marks DB-optional smoke tests for First Organism (no DB required)
    wide_slice: marks tests for Wide Slice Dyno Chart log validation
    requires_db: marks tests that require database connection (will skip if DB unavailable)
    hermetic: marks tests that run without external dependencies (DB/Redis)
    ht_spec: marks Phase II Ht invariant spec tests (not in default CI, reference implementation only)
    replay: marks HT replay invariant tests (Phase II)
    conformance_l0: marks L0 (minimal) conformance tests - type and determinism smoke tests
    conformance_l1: marks L1 (standard) conformance tests - all invariant tests
    conformance_l2: marks L2 (full) conformance tests - invariants + monotonicity + boundary
    conformance_l3: marks L3 (exhaustive) conformance tests - full + stress tests
    type_stability: marks tests verifying type stability of metric outputs
    boundary: marks boundary condition tests
    perf: marks performance-related tests (excluded from default CI runs)
    oracle: marks tests using equivalence oracle or oracle-based validation
    adversarial: marks tests as adversarial fault injection
    mutation: marks tests for mutation detection
    high_volume: marks tests with large batch sizes (10^5)
    entropy: marks tests checking for entropy leaks
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
